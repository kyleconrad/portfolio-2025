---
// @ts-nocheck

const { image } = Astro.props;

const srcsetAvif =
    image.url + '?fm=avif&w=800&q=90 800w, ' +
    image.url + '?fm=avif&w=1200&q=90 1200w, ' +
    image.url + '?fm=avif&w=1600&q=90 1600w, ' +
    image.url + '?fm=avif&q=90 ' + image.width + 'w';
const srcsetWebP =
    image.url + '?fm=webp&w=800&q=90 800w, ' +
    image.url + '?fm=webp&w=1200&q=90 1200w, ' +
    image.url + '?fm=webp&w=1600&q=90 1600w, ' +
    image.url + '?fm=webp&q=90 ' + image.width + 'w';
const srcset =
    image.url + '?w=800&q=90 800w, ' +
    image.url + '?w=1200&q=90 1200w, ' +
    image.url + '?w=1600&q=90 1600w, ' +
    image.url + '?q=90 ' + image.width + 'w';

const sizes = '(max-width: 700px) 800px, (max-width: 1024px) 1200px, (max-width: 1600px) 1600px, ' + image.width + 'px';
---
<picture nopin="nopin">
    <source
        type="image/avif"
        srcset={ srcsetAvif }
        sizes={ sizes }
    />
    <source
        type="image/webp"
        srcset={ srcsetWebP }
        sizes={ sizes }
    />
    <img
        srcset={ srcset }
        sizes={ sizes }
        src={ image.url }
        width={ image.width }
        height={ image.height }
        alt={ image.description }
        decoding="async"
        loading="lazy"
        nopin="nopin"
    />
</picture>